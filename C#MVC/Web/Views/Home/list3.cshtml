
@{
    ViewBag.Title = "list3";
    Layout = "~/Views/Shared/ConsoleLayout.cshtml";
}

@section head{
    <style type="text/css">
    </style>
}

@section bottom{
    <script>
        var myTable = $('#table');
        var queryParams = { name: "111" };

        $(function () {
            LoadList();
            $("#btnConditional").click(function () {
                LoadList();
            });

            //datetimepicker
            $('#datetimepicker, #datetimepickerStart, #datetimepickerEnd').datetimepicker({
                autoclose: true, // 选中之后自动隐藏日期选择框
                todayHighlight: true,
                clearBtn: true, //清除按钮
                todayBtn: true, //今日按钮
                language: "zh-CN" //语言设置
            });

        });

        function LoadList() {
            // 官方文档：http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/
            //先销毁表格
            myTable.bootstrapTable('destroy');
            //初始化表格,动态从服务器加载数据
            myTable.bootstrapTable({
                striped: true, //表格显示条纹
                pagination: true, //设置为 true 会在表格底部显示分页条。
                paginationDetailHAlign: 'left',
                paginationHAlign: 'right',
                pageSize: 3, //每页显示的记录数
                pageNumber: 1, //当前第几页
                pageList: [5, 10, 15, 20, 25], //记录数可选列表
                buttonsAlign: 'right',
                showColumns: true, //显示下拉框勾选要显示的列
                minimumCountColumns: 2, //最小隐藏列的数量。
                showRefresh: true, //显示刷新按钮
                showToggle: true, //是否显示切换视图（table/card）按钮。
                showPaginationSwitch: true, //是否显示切换分页按钮
                locale: "zh-CN",
                /*设置为undefined可以获取pageNumber，pageSize，searchText，sortName，sortOrder
                *设置为limit可以获取limit, offset, search, sort, order
                */
                //queryParamsType: "undefined",
                //sidePagination: 'client',
                icons: {
                    paginationSwitchDown: 'fa-chevron-down',
                    paginationSwitchUp: 'fa-chevron-up',
                    refresh: 'fa-refresh',
                    toggle: 'fa-list-alt',
                    columns: 'fa-th-list',
                    detailOpen: 'fa-plus',
                    detailClose: 'fa-minus'
                },
                url: "/Home/getlist3", //服务器数据的加载地址。
                method: "get", //服务器数据的请求方式 'get' 或 'post'。
                sidePagination: "server", //设置在哪里进行分页，可选值为 'client' 或者 'server'。设置 'server'时，必须设置服务器数据地址（url）或者重写ajax方法。
                queryParamsType: '',
                queryParams: function (params) {
                    //console.dir(params);
                    //return params;
                    queryParams.pageNumber = params.pageNumber;
                    queryParams.pageSize = params.pageSize;
                    queryParams.searchText = params.searchText;
                    queryParams.sortName = params.sortName;
                    queryParams.sortOrder = params.sortOrder;
                    console.log(queryParams);
                    return queryParams;
                },
                columns: [{
                    field: 'id',
                    title: 'Item ID'
                }, {
                    field: 'name',
                    title: 'Item Name'
                }, {
                    field: 'price',
                    title: 'Item Price'
                }, {
                    align: "center",
                    field: 'ButtonColumn',
                    title: '操作',
                    formatter: function (value, row, index) {
                        var html = "<div class=\"btn-group\">";
                        html += "<button type=\"button\" class=\"btn btn-success\">详情</button>";
                        html += "<button type=\"button\" class=\"btn btn-info\">编辑</button>";
                        html += "<button type=\"button\" class=\"btn btn-warning\">删除</button>";
                        html += "</div>";
                        return html;
                    }
                }],
                responseHandler: function (res) { //加载服务器数据之前的处理程序，可以用来格式化数据。参数：res为从服务器请求到的数据。
                    console.log(res);
                    if (!!res && 200 === res.status && !!res.data) {
                        return res.data;
                    }
                    else {
                        alert(res.message);
                    }
                    return res;
                },
                //data: function (data) { //格式化数据
                //    console.log(data);
                //    return data;
                //},
                selectItemName: 'id', //radio 或者 checkbox 的字段 name 名。
                detailView: true, //设置为 true 可以显示详细页面模式。
                detailFormatter: function (index, row) {
                    return '这是详细内容：' + index;
                }
            });
        }

    </script>
    <!-- Bootstrap-Table Demo JavaScript End xiongzaiqiren -->
}

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            Bootstrap-Table Demo
            <small>Optional description</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> Level</a></li>
            <li class="active">Here</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content container-fluid">
        <!--------------------------
          | Your Page Content Here |
          -------------------------->
        <!-- Bootstrap-Table Demo Html Start xiongzaiqiren -->
        <div class="row">
            <div class="col-xs-12">
                <div class="box">
                    <div class="box-header with-border">
                        <h3 class="box-title"><a class="detail-icon" href="javascript:;" id="ConditionalSwitch">筛选条件 <i class="fa fa-minus"></i> </a></h3>
                        <div id="ConditionalContainer">
                            <div class="row">
                                <div class="col-xs-3">
                                    <div class="form-group">
                                        <label for="exampleInputEmail1">邮箱:</label>
                                        <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
                                    </div>
                                </div>
                                <div class="col-xs-4">
                                    <div class="form-group">
                                        <label>日期时间:</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input type="text" class="form-control pull-right" id="datetimepicker" value="2012-05-15 21:05" data-date-format="yyyy-mm-dd hh:ii">
                                        </div>
                                        <!-- /.input group -->
                                    </div>
                                </div>
                                <div class="col-xs-5">
                                    <div class="form-group">
                                        <label>时间范围:</label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input type="text" class="form-control pull-right" id="datetimepickerStart" value="2012-05-15 21:05" data-date-format="yyyy-mm-dd hh:ii">
                                            <span class="input-group-addon">至</span>
                                            <input type="text" class="form-control pull-right" id="datetimepickerEnd" value="2012-05-15 21:05" data-date-format="yyyy-mm-dd hh:ii">
                                        </div>
                                        <!-- /.input group -->
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-5 col-xs-3">
                                </div>
                                <div class="col-md-2 col-xs-4">
                                    <button type="button" class="btn btn-block btn-primary" id="btnConditional">检 索</button>
                                </div>
                                <div class="col-md-5 col-xs-3">
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /.box-header -->
                    <div class="box-body">
                        <div id="example2_wrapper" class="dataTables_wrapper form-inline dt-bootstrap">
                            <table id="table"></table>
                        </div>
                    </div>
                    <!-- /.box-body -->
                </div>
                <!-- /.box -->
            </div>
            <!-- /.col -->
        </div>
        <!-- /.row -->
        <!-- Bootstrap-Table Demo Html End xiongzaiqiren -->
    </section>
    <!-- /.content -->
</div>